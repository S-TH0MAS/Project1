### Variables
@baseUrl = http://localhost:8000
@contentType = application/json
@token = eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJpYXQiOjE3NjQwNTIxODQsImV4cCI6MTc2NDA1NTc4NCwicm9sZXMiOlsiUk9MRV9VU0VSIl0sInVzZXJuYW1lIjoidGVzdEB0ZXN0Lm1haWwifQ.bAlhVOc9RhJJwRjD5CtDKVRp4bT1nnt9y0oJIm5BGmgaa5Ybh9xBlOKVvfjDbgCdIIF8ZCnlQ4mKmng3fkamBWZMPotc_gw9A5sjM8hLsbdTa1gq-lPTtFyKSog2fjBFmYiletRyAXoi-EiIqq-kg-_7CWZ3nM5_d9Ta_-bCZqCF3PND4Z405S5PuXOjSIGaGYGbK_sACvpUDKUO1I41QmGxXuu1kWoLbu6BQymn0dvghUzcDzAp9gOT1mY4CNnWpw3GWnBA2lXh2J0JqO63hVPwYVi99jvHuH5OsUUkFfnTuOwghFEvhaMD9wqBMox2_V92iM5NdTxZ-Mu2HUawiA

### IMPORTANT: Obtenez d'abord un token via POST /user/login
### Remplacez {{token}} ci-dessous par le token obtenu, ou utilisez une variable d'environnement
### Assurez-vous d'avoir des items dans votre inventaire avant de tester

### Générer une recette avec un prompt personnalisé
POST {{baseUrl}}/api/generate_recipes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "prompt": "Donne-moi une recette simple et rapide"
}

### Générer une recette avec un prompt détaillé
POST {{baseUrl}}/api/generate_recipes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "prompt": "Je veux une recette végétarienne avec mes ingrédients disponibles"
}

### Générer une recette pour un dessert
POST {{baseUrl}}/api/generate_recipes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "prompt": "Propose-moi un dessert"
}

### Test avec prompt manquant (devrait retourner 400)
POST {{baseUrl}}/api/generate_recipes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{}

### Test avec prompt vide (devrait retourner 400)
POST {{baseUrl}}/api/generate_recipes
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "prompt": ""
}

### Test sans token (devrait retourner 401)
POST {{baseUrl}}/api/generate_recipes
Content-Type: {{contentType}}

{
  "prompt": "Donne-moi une recette"
}

### Test avec token invalide (devrait retourner 401)
POST {{baseUrl}}/api/generate_recipes
Content-Type: {{contentType}}
Authorization: Bearer invalid_token_here

{
  "prompt": "Donne-moi une recette"
}

### ============================================
### TESTS POUR /save_recipe
### ============================================
### IMPORTANT: Vous devez d'abord générer une recette via POST /api/generate_recipes
### pour obtenir un cache_key valide avant de tester cette route

### Sauvegarder une recette avec un cache_key valide
### Remplacez {{cache_key}} par le cache_key obtenu depuis la réponse de /generate_recipes
POST {{baseUrl}}/api/save_recipe
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "cache_key": "recipe_12345678-1234-1234-1234-123456789abc"
}

### Test avec cache_key manquant (devrait retourner 400)
POST {{baseUrl}}/api/save_recipe
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{}

### Test avec cache_key vide (devrait retourner 400)
POST {{baseUrl}}/api/save_recipe
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "cache_key": ""
}

### Test avec cache_key invalide (devrait retourner 400 ou 404)
POST {{baseUrl}}/api/save_recipe
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "cache_key": "invalid_cache_key_123"
}

### Test avec cache_key expiré ou inexistant (devrait retourner 404)
POST {{baseUrl}}/api/save_recipe
Content-Type: {{contentType}}
Authorization: Bearer {{token}}

{
  "cache_key": "recipe_00000000-0000-0000-0000-000000000000"
}

### Test sans token (devrait retourner 401)
POST {{baseUrl}}/api/save_recipe
Content-Type: {{contentType}}

{
  "cache_key": "recipe_8a26b565-1efa-47b4-a84a-9878af8a5d76"
}

### Test avec token invalide (devrait retourner 401)
POST {{baseUrl}}/api/save_recipe
Content-Type: {{contentType}}
Authorization: Bearer invalid_token_here

{
  "cache_key": "recipe_12345678-1234-1234-1234-123456789abc"
}

