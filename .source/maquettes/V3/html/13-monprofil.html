<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Mon Profil - Dashboard</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
    <style>
      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
      }
      .bottom-sheet {
        transition: transform 0.3s ease-in-out;
      }
      .bottom-sheet-backdrop {
        transition: opacity 0.3s ease-in-out;
      }
    </style>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#10b981", // emerald-500 for a slightly brighter sage green
              "background-light": "#f8fafc", // slate-50
              "background-dark": "#0f172a", // slate-900
              "surface-light": "#ffffff",
              "surface-dark": "#1e293b", // slate-800
              "text-light": "#1e293b", // slate-800
              "text-dark": "#e2e8f0", // slate-200
              "text-secondary-light": "#64748b", // slate-500
              "text-secondary-dark": "#94a3b8", // slate-400
              destructive: "#ef4444", // red-500
            },
            fontFamily: {
              display: ["Work Sans", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.75rem", // rounded-lg
              lg: "1rem", // rounded-xl
              xl: "1.5rem", // rounded-2xl
              "2xl": "2rem", // rounded-3xl
              full: "9999px",
            },
            boxShadow: {
              soft: "0 4px 12px 0 rgba(0, 0, 0, 0.05)",
              "soft-dark": "0 4px 12px 0 rgba(0, 0, 0, 0.15)",
              fab: "0 8px 20px 0 rgba(16, 185, 129, 0.3)",
            },
          },
        },
      };
    </script>
    <style>
      body {
        min-height: max(884px, 100dvh);
      }
    </style>
  </head>
  <body class="bg-black font-display">
    <div
      class="relative mx-auto flex h-auto min-h-screen w-full max-w-md flex-col overflow-x-hidden group/design-root bg-background-light dark:bg-background-dark"
    >
      <!-- Admin Dashboard Section (hidden by default, shown if user is admin) -->
      <div id="admin-dashboard" class="hidden">
        <!-- Sticky Header -->
        <header
          class="sticky top-0 z-40 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm"
        >
          <div class="flex flex-col gap-3 p-4 pb-3">
            <div class="flex items-center justify-between">
              <div class="flex flex-col">
                <p
                  class="text-text-light dark:text-text-dark tracking-light text-[28px] font-bold leading-tight"
                >
                  Dashboard Admin
                </p>
                <p
                  class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-medium mt-1"
                >
                  Bonjour,
                  <span id="admin-user-name" class="text-primary font-semibold"
                    >John Doe</span
                  >
                </p>
              </div>
              <button
                id="logout-button-admin"
                class="flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-destructive/10 hover:bg-destructive/20 text-destructive transition-colors"
                title="Déconnexion"
              >
                <span class="material-symbols-outlined text-lg">logout</span>
                <span class="text-sm font-medium hidden sm:inline"
                  >Déconnexion</span
                >
              </button>
            </div>
          </div>
        </header>
        <!-- Main Content: Stats Cards -->
        <main class="flex-1 px-4 py-6 space-y-4 pb-28">
          <!-- Ingrédients Card -->
          <a
            href="8-admin-ingredients.html"
            class="flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-6 min-h-[100px] rounded-xl shadow-soft dark:shadow-none hover:shadow-lg transition-shadow cursor-pointer"
          >
            <div
              class="text-4xl flex items-center justify-center rounded-lg bg-primary/10 shrink-0 size-16"
            >
              <span class="material-symbols-outlined text-primary text-4xl"
                >restaurant</span
              >
            </div>
            <div class="flex flex-col justify-center flex-1">
              <p
                class="text-text-light dark:text-text-dark text-lg font-semibold leading-normal"
              >
                Ingrédients
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1"
              >
                <span
                  id="admin-ingredients-count"
                  class="text-primary font-bold text-xl"
                  >0</span
                >
                ingrédients au total
              </p>
            </div>
            <div class="shrink-0">
              <span
                class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark"
                >chevron_right</span
              >
            </div>
          </a>
          <!-- Catégories Card -->
          <a
            href="7-admin-categories.html"
            class="flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-6 min-h-[100px] rounded-xl shadow-soft dark:shadow-none hover:shadow-lg transition-shadow cursor-pointer"
          >
            <div
              class="text-4xl flex items-center justify-center rounded-lg bg-primary/10 shrink-0 size-16"
            >
              <span class="material-symbols-outlined text-primary text-4xl"
                >category</span
              >
            </div>
            <div class="flex flex-col justify-center flex-1">
              <p
                class="text-text-light dark:text-text-dark text-lg font-semibold leading-normal"
              >
                Catégories
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1"
              >
                <span
                  id="admin-categories-count"
                  class="text-primary font-bold text-xl"
                  >0</span
                >
                catégories au total
              </p>
            </div>
            <div class="shrink-0">
              <span
                class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark"
                >chevron_right</span
              >
            </div>
          </a>
          <!-- Utilisateurs Card -->
          <a
            href="9-admin-users.html"
            class="flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-6 min-h-[100px] rounded-xl shadow-soft dark:shadow-none hover:shadow-lg transition-shadow cursor-pointer"
          >
            <div
              class="text-4xl flex items-center justify-center rounded-lg bg-primary/10 shrink-0 size-16"
            >
              <span class="material-symbols-outlined text-primary text-4xl"
                >people</span
              >
            </div>
            <div class="flex flex-col justify-center flex-1">
              <p
                class="text-text-light dark:text-text-dark text-lg font-semibold leading-normal"
              >
                Utilisateurs
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1"
              >
                <span
                  id="admin-users-count"
                  class="text-primary font-bold text-xl"
                  >0</span
                >
                utilisateurs au total
              </p>
            </div>
            <div class="shrink-0">
              <span
                class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark"
                >chevron_right</span
              >
            </div>
          </a>
        </main>
      </div>

      <!-- User Dashboard Section (shown by default, hidden if user is admin) -->
      <div id="user-dashboard">
        <!-- Sticky Header -->
        <header
          class="sticky top-0 z-40 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm"
        >
          <div class="flex flex-col gap-3 p-4 pb-3">
            <div class="flex items-center justify-between">
              <div class="flex flex-col">
                <p
                  class="text-text-light dark:text-text-dark tracking-light text-[28px] font-bold leading-tight"
                >
                  Mon Profil
                </p>
                <p
                  class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-medium mt-1"
                >
                  Bonjour,
                  <span id="user-name" class="text-primary font-semibold"
                    >John Doe</span
                  >
                </p>
              </div>
              <button
                id="logout-button-user"
                class="flex items-center justify-center gap-2 px-4 py-2 rounded-xl bg-destructive/10 hover:bg-destructive/20 text-destructive transition-colors"
                title="Déconnexion"
              >
                <span class="material-symbols-outlined text-lg">logout</span>
                <span class="text-sm font-medium hidden sm:inline"
                  >Déconnexion</span
                >
              </button>
            </div>
          </div>
        </header>
        <!-- Main Content: User Stats Cards -->
        <main class="flex-1 px-4 py-6 space-y-4 pb-28">
          <!-- Inventaire Card -->
          <a
            href="11-ingredients-private.html"
            class="flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-6 min-h-[100px] rounded-xl shadow-soft dark:shadow-none hover:shadow-lg transition-shadow cursor-pointer"
          >
            <div
              class="text-4xl flex items-center justify-center rounded-lg bg-primary/10 shrink-0 size-16"
            >
              <span class="material-symbols-outlined text-primary text-4xl"
                >inventory_2</span
              >
            </div>
            <div class="flex flex-col justify-center flex-1">
              <p
                class="text-text-light dark:text-text-dark text-lg font-semibold leading-normal"
              >
                Mon Inventaire
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1"
              >
                <span
                  id="user-inventory-count"
                  class="text-primary font-bold text-xl"
                  >0</span
                >
                items dans votre inventaire
              </p>
            </div>
            <div class="shrink-0">
              <span
                class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark"
                >chevron_right</span
              >
            </div>
          </a>
          <!-- Recettes Card -->
          <a
            href="17-mes-recettes.html"
            class="flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-6 min-h-[100px] rounded-xl shadow-soft dark:shadow-none hover:shadow-lg transition-shadow cursor-pointer"
          >
            <div
              class="text-4xl flex items-center justify-center rounded-lg bg-primary/10 shrink-0 size-16"
            >
              <span class="material-symbols-outlined text-primary text-4xl"
                >restaurant_menu</span
              >
            </div>
            <div class="flex flex-col justify-center flex-1">
              <p
                class="text-text-light dark:text-text-dark text-lg font-semibold leading-normal"
              >
                Mes Recettes
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1"
              >
                <span
                  id="user-recipes-count"
                  class="text-primary font-bold text-xl"
                  >0</span
                >
                recettes générées
              </p>
            </div>
            <div class="shrink-0">
              <span
                class="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark"
                >chevron_right</span
              >
            </div>
          </a>
        </main>
      </div>

      <!-- Bottom Navigation -->
      <nav
        class="fixed bottom-0 left-0 right-0 z-50 mx-auto max-w-md border-t border-slate-200/50 dark:border-slate-700/50 bg-surface-light/80 dark:bg-surface-dark/80 backdrop-blur-sm"
      >
        <div class="flex h-20 items-center justify-around px-4">
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="3-inventory.html"
          >
            <span class="material-symbols-outlined">inventory_2</span>
            <span class="text-xs font-medium">Inventaire</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="5-recipe_prompt.html"
          >
            <span class="material-symbols-outlined">restaurant_menu</span>
            <span class="text-xs font-medium">Recette</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="14-communaute.html"
          >
            <span class="material-symbols-outlined">groups</span>
            <span class="text-xs font-medium">Communauté</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-primary"
            href="13-monprofil.html"
          >
            <span
              class="material-symbols-outlined"
              style="font-variation-settings: 'FILL' 1"
              >account_circle</span
            >
            <span class="text-xs font-medium">Profil</span>
          </a>
        </div>
      </nav>
    </div>
    <script>
      // Detect user role and show appropriate dashboard
      document.addEventListener("DOMContentLoaded", () => {
        // Replace with actual API call to get user role
        // fetch('/api/user')
        //   .then(res => res.json())
        //   .then(data => {
        //     const isAdmin = data.roles && data.roles.includes('ROLE_ADMIN');
        //     showDashboard(isAdmin, data);
        //   });

        // For demo purposes, you can set this manually or via URL parameter
        // Example: ?role=admin or ?role=user
        const urlParams = new URLSearchParams(window.location.search);
        const role = urlParams.get("role") || "user"; // Default to 'user'
        const isAdmin = role === "admin";

        showDashboard(isAdmin, {
          name: "John Doe",
          email: "john.doe@example.com",
        });
      });

      function showDashboard(isAdmin, userData) {
        const adminDashboard = document.getElementById("admin-dashboard");
        const userDashboard = document.getElementById("user-dashboard");

        if (isAdmin) {
          adminDashboard.classList.remove("hidden");
          userDashboard.classList.add("hidden");

          // Load admin data
          document.getElementById("admin-user-name").textContent =
            userData.name || userData.email;
          document.getElementById("admin-ingredients-count").textContent = "42";
          document.getElementById("admin-categories-count").textContent = "8";
          document.getElementById("admin-users-count").textContent = "156";
        } else {
          adminDashboard.classList.add("hidden");
          userDashboard.classList.remove("hidden");

          // Load user data
          document.getElementById("user-name").textContent =
            userData.name || userData.email;
          document.getElementById("user-inventory-count").textContent = "24";
          document.getElementById("user-recipes-count").textContent = "12";
        }
      }

      // Logout button handlers
      document
        .getElementById("logout-button-admin")
        ?.addEventListener("click", handleLogout);
      document
        .getElementById("logout-button-user")
        ?.addEventListener("click", handleLogout);

      function handleLogout() {
        if (confirm("Êtes-vous sûr de vouloir vous déconnecter ?")) {
          // Replace with actual logout logic
          // window.location.href = "/logout";
          console.log("Déconnexion...");
        }
      }
    </script>
  </body>
</html>
