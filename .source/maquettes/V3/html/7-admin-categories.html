<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Admin - Catégories</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
    <style>
      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
      }
      .bottom-sheet {
        transition: transform 0.3s ease-in-out;
      }
      .bottom-sheet-backdrop {
        transition: opacity 0.3s ease-in-out;
      }
      .show-sheet .bottom-sheet {
        transform: translateY(0);
      }
      .show-sheet .bottom-sheet-backdrop {
        opacity: 1;
        pointer-events: auto;
      }
    </style>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#10b981",
              "background-light": "#f8fafc",
              "background-dark": "#0f172a",
              "surface-light": "#ffffff",
              "surface-dark": "#1e293b",
              "text-light": "#1e293b",
              "text-dark": "#e2e8f0",
              "text-secondary-light": "#64748b",
              "text-secondary-dark": "#94a3b8",
              destructive: "#ef4444",
            },
            fontFamily: {
              display: ["Work Sans", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.75rem",
              lg: "1rem",
              xl: "1.5rem",
              "2xl": "2rem",
              full: "9999px",
            },
            boxShadow: {
              soft: "0 4px 12px 0 rgba(0, 0, 0, 0.05)",
              "soft-dark": "0 4px 12px 0 rgba(0, 0, 0, 0.15)",
              fab: "0 8px 20px 0 rgba(16, 185, 129, 0.3)",
            },
          },
        },
      };
    </script>
    <style>
      body {
        min-height: max(884px, 100dvh);
      }
    </style>
  </head>
  <body class="bg-black font-display">
    <div
      class="relative mx-auto flex h-auto min-h-screen w-full max-w-md flex-col overflow-x-hidden group/design-root bg-background-light dark:bg-background-dark"
    >
      <!-- Sticky Header -->
      <header
        class="sticky top-0 z-40 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm"
      >
        <div class="flex flex-col gap-3 p-4 pb-3">
          <div class="flex items-center gap-3">
            <a
              href="10-dashboard-admin.html"
              class="flex items-center justify-center size-10 text-text-light dark:text-text-dark"
            >
              <span class="material-symbols-outlined">arrow_back</span>
            </a>
            <p
              class="text-text-light dark:text-text-dark tracking-light text-xl font-bold leading-tight"
            >
              Gestion des Catégories
            </p>
          </div>
          <!-- SearchBar -->
          <label class="flex flex-col min-w-40 h-14 w-full">
            <div
              class="flex w-full flex-1 items-stretch rounded-xl h-full shadow-soft dark:shadow-none"
            >
              <div
                class="text-text-secondary-light dark:text-text-secondary-dark flex bg-surface-light dark:bg-surface-dark items-center justify-center pl-4 rounded-l-xl border-r-0"
              >
                <span class="material-symbols-outlined">search</span>
              </div>
              <input
                id="search-input"
                oninput="filterItems()"
                class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-r-xl text-text-light dark:text-text-dark focus:outline-0 focus:ring-2 focus:ring-primary/50 border-none bg-surface-light dark:bg-surface-dark h-full placeholder:text-text-secondary-light dark:placeholder:text-text-secondary-dark px-4 pl-2 text-base font-normal leading-normal"
                placeholder="Rechercher une catégorie..."
                value=""
              />
            </div>
          </label>
        </div>
      </header>
      <!-- Main Content: List -->
      <main id="items-list" class="flex-1 px-4 py-4 space-y-3 pb-28">
        <!-- Item Card 1 -->
        <div
          class="item-card flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-4 min-h-[72px] justify-between rounded-xl shadow-soft dark:shadow-none"
          data-name="frais"
        >
          <div class="flex items-center gap-4 flex-1">
            <div
              class="text-4xl flex items-center justify-center rounded-lg bg-primary/10 shrink-0 size-14"
            >
              <span class="material-symbols-outlined text-primary text-2xl"
                >category</span
              >
            </div>
            <div class="flex flex-col justify-center flex-1">
              <p
                class="text-text-light dark:text-text-dark text-base font-medium leading-normal line-clamp-1"
              >
                Frais
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1"
              >
                ID: 1
              </p>
            </div>
          </div>
          <div class="shrink-0 flex items-center gap-2">
            <button
              onclick="openEditSheet(1, 'Frais', 'Produits frais et périssables')"
              class="flex items-center justify-center size-10 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors"
            >
              <span class="material-symbols-outlined text-lg">edit</span>
            </button>
            <button
              onclick="deleteItem(1)"
              class="flex items-center justify-center size-10 rounded-lg bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors"
            >
              <span class="material-symbols-outlined text-lg">delete</span>
            </button>
          </div>
        </div>
        <!-- Item Card 2 -->
        <div
          class="item-card flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-4 min-h-[72px] justify-between rounded-xl shadow-soft dark:shadow-none"
          data-name="congelé"
        >
          <div class="flex items-center gap-4 flex-1">
            <div
              class="text-4xl flex items-center justify-center rounded-lg bg-primary/10 shrink-0 size-14"
            >
              <span class="material-symbols-outlined text-primary text-2xl"
                >category</span
              >
            </div>
            <div class="flex flex-col justify-center flex-1">
              <p
                class="text-text-light dark:text-text-dark text-base font-medium leading-normal line-clamp-1"
              >
                Congelé
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1"
              >
                ID: 2
              </p>
            </div>
          </div>
          <div class="shrink-0 flex items-center gap-2">
            <button
              onclick="openEditSheet(2, 'Congelé', 'Produits surgelés')"
              class="flex items-center justify-center size-10 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors"
            >
              <span class="material-symbols-outlined text-lg">edit</span>
            </button>
            <button
              onclick="deleteItem(2)"
              class="flex items-center justify-center size-10 rounded-lg bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors"
            >
              <span class="material-symbols-outlined text-lg">delete</span>
            </button>
          </div>
        </div>
        <!-- Item Card 3 -->
        <div
          class="item-card flex items-center gap-4 bg-surface-light dark:bg-surface-dark p-4 min-h-[72px] justify-between rounded-xl shadow-soft dark:shadow-none"
          data-name="épicerie"
        >
          <div class="flex items-center gap-4 flex-1">
            <div
              class="text-4xl flex items-center justify-center rounded-lg bg-primary/10 shrink-0 size-14"
            >
              <span class="material-symbols-outlined text-primary text-2xl"
                >category</span
              >
            </div>
            <div class="flex flex-col justify-center flex-1">
              <p
                class="text-text-light dark:text-text-dark text-base font-medium leading-normal line-clamp-1"
              >
                Épicerie
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-normal leading-normal mt-1"
              >
                ID: 3
              </p>
            </div>
          </div>
          <div class="shrink-0 flex items-center gap-2">
            <button
              onclick="openEditSheet(3, 'Épicerie', 'Produits d\'épicerie')"
              class="flex items-center justify-center size-10 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors"
            >
              <span class="material-symbols-outlined text-lg">edit</span>
            </button>
            <button
              onclick="deleteItem(3)"
              class="flex items-center justify-center size-10 rounded-lg bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors"
            >
              <span class="material-symbols-outlined text-lg">delete</span>
            </button>
          </div>
        </div>
      </main>
      <!-- Floating Action Button -->
      <button
        onclick="openCreateSheet()"
        class="absolute bottom-24 right-4 z-40 flex h-16 w-16 items-center justify-center rounded-2xl bg-primary text-white shadow-fab cursor-pointer"
      >
        <span
          class="material-symbols-outlined text-4xl"
          style="font-variation-settings: 'wght' 500"
          >add</span
        >
      </button>
      <!-- Bottom Navigation -->
      <nav
        class="fixed bottom-0 left-0 right-0 z-50 mx-auto max-w-md border-t border-slate-200/50 dark:border-slate-700/50 bg-surface-light/80 dark:bg-surface-dark/80 backdrop-blur-sm"
      >
        <div class="flex h-20 items-center justify-around px-4">
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="3-inventory.html"
          >
            <span class="material-symbols-outlined">inventory_2</span>
            <span class="text-xs font-medium">Inventaire</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="5-recipe_prompt.html"
          >
            <span class="material-symbols-outlined">restaurant_menu</span>
            <span class="text-xs font-medium">Recette</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="14-communaute.html"
          >
            <span class="material-symbols-outlined">groups</span>
            <span class="text-xs font-medium">Communauté</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="13-monprofil.html"
          >
            <span
              class="material-symbols-outlined"
              style="font-variation-settings: 'FILL' 1"
              >account_circle</span
            >
            <span class="text-xs font-medium">Profil</span>
          </a>
        </div>
      </nav>
      <!-- Bottom Sheet for Create/Edit -->
      <div
        id="form-sheet"
        class="fixed inset-0 z-50 flex items-end pointer-events-none"
      >
        <!-- Backdrop -->
        <div
          class="absolute inset-0 bg-black/40 bottom-sheet-backdrop opacity-0"
          onclick="closeSheet()"
        ></div>
        <!-- Sheet Content -->
        <div
          class="relative w-full max-w-md mx-auto bg-background-light dark:bg-background-dark rounded-t-2xl p-4 transform translate-y-full bottom-sheet pointer-events-auto max-h-[90vh] overflow-y-auto"
        >
          <div
            class="mx-auto w-12 h-1.5 flex-shrink-0 rounded-full bg-slate-300 dark:bg-slate-600 mb-4"
          ></div>
          <h2
            id="form-title"
            class="text-xl font-bold text-text-light dark:text-text-dark mb-6 text-center"
          >
            Nouvelle Catégorie
          </h2>
          <form
            id="category-form"
            class="space-y-6"
            onsubmit="handleSubmit(event)"
          >
            <input type="hidden" id="category-id" />
            <!-- Name -->
            <div>
              <label
                class="block text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1"
                for="category-name"
                >Nom de la catégorie</label
              >
              <input
                class="form-input w-full rounded-xl border-slate-300 dark:border-slate-600 bg-surface-light dark:bg-surface-dark text-text-light dark:text-text-dark focus:border-primary focus:ring-primary h-14"
                id="category-name"
                type="text"
                placeholder="Ex: Frais"
                required
              />
            </div>
            <!-- Description -->
            <div>
              <label
                class="block text-sm font-medium text-text-secondary-light dark:text-text-secondary-dark mb-1"
                for="category-description"
                >Description</label
              >
              <textarea
                class="form-textarea w-full rounded-xl border-slate-300 dark:border-slate-600 bg-surface-light dark:bg-surface-dark text-text-light dark:text-text-dark focus:border-primary focus:ring-primary min-h-24"
                id="category-description"
                placeholder="Description de la catégorie..."
              ></textarea>
            </div>
            <!-- Action Buttons -->
            <div class="grid grid-cols-2 gap-4 pt-4">
              <button
                type="button"
                onclick="closeSheet()"
                class="py-3 px-4 rounded-xl text-center font-bold bg-slate-200 dark:bg-slate-700 text-text-light dark:text-text-dark"
              >
                Annuler
              </button>
              <button
                type="submit"
                class="py-3 px-4 rounded-xl text-center font-bold bg-primary text-white"
              >
                Enregistrer
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    <script>
      let currentEditId = null;

      function openCreateSheet() {
        currentEditId = null;
        document.getElementById("form-title").textContent =
          "Nouvelle Catégorie";
        document.getElementById("category-form").reset();
        document.getElementById("category-id").value = "";
        document.getElementById("form-sheet").classList.add("show-sheet");
      }

      function openEditSheet(id, name, description) {
        currentEditId = id;
        document.getElementById("form-title").textContent =
          "Modifier la Catégorie";
        document.getElementById("category-id").value = id;
        document.getElementById("category-name").value = name;
        document.getElementById("category-description").value =
          description || "";
        document.getElementById("form-sheet").classList.add("show-sheet");
      }

      function closeSheet() {
        document.getElementById("form-sheet").classList.remove("show-sheet");
      }

      function handleSubmit(event) {
        event.preventDefault();
        const id = document.getElementById("category-id").value;
        const name = document.getElementById("category-name").value;
        const description = document.getElementById(
          "category-description"
        ).value;

        // Here you would make an API call to create/update
        console.log(currentEditId ? "Update" : "Create", {
          id,
          name,
          description,
        });

        // Simulate API call
        setTimeout(() => {
          alert(
            currentEditId
              ? `Catégorie "${name}" modifiée avec succès!`
              : `Catégorie "${name}" créée avec succès!`
          );
          closeSheet();
          // In a real app, you would reload the list here
        }, 300);
      }

      function deleteItem(id) {
        if (confirm("Êtes-vous sûr de vouloir supprimer cette catégorie ?")) {
          // Here you would make an API call to delete
          console.log("Delete", id);
          // Simulate API call
          setTimeout(() => {
            alert("Catégorie supprimée avec succès!");
            // In a real app, you would remove the item from the list or reload
          }, 300);
        }
      }

      // Filter items based on search input
      function filterItems() {
        const searchInput = document.getElementById("search-input");
        const searchTerm = searchInput.value.toLowerCase().trim();
        const items = document.querySelectorAll(".item-card");

        items.forEach((item) => {
          const itemName = item.getAttribute("data-name") || "";
          const itemText = item.textContent.toLowerCase();

          if (
            itemName.includes(searchTerm) ||
            itemText.includes(searchTerm) ||
            searchTerm === ""
          ) {
            item.style.display = "flex";
          } else {
            item.style.display = "none";
          }
        });
      }
    </script>
  </body>
</html>
