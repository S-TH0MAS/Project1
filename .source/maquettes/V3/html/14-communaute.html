<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Communauté - Recettes Partagées</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@400;500;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
    <style>
      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
      }
      .bottom-sheet {
        transition: transform 0.3s ease-in-out;
      }
      .bottom-sheet-backdrop {
        transition: opacity 0.3s ease-in-out;
      }
      .show-sheet .bottom-sheet {
        transform: translateY(0);
      }
      .show-sheet .bottom-sheet-backdrop {
        opacity: 1;
        pointer-events: auto;
      }
      .favorite-btn.favorited .material-symbols-outlined {
        font-variation-settings: "FILL" 1;
        color: #ef4444;
      }
      #add-favorite-btn.favorited {
        background-color: rgba(239, 68, 68, 0.1) !important;
        color: #ef4444 !important;
      }
      #add-favorite-btn.favorited .material-symbols-outlined {
        font-variation-settings: "FILL" 1;
        color: #ef4444;
      }
    </style>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#10b981",
              "background-light": "#f8fafc",
              "background-dark": "#0f172a",
              "surface-light": "#ffffff",
              "surface-dark": "#1e293b",
              "text-light": "#1e293b",
              "text-dark": "#e2e8f0",
              "text-secondary-light": "#64748b",
              "text-secondary-dark": "#94a3b8",
              destructive: "#ef4444",
            },
            fontFamily: {
              display: ["Work Sans", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.75rem",
              lg: "1rem",
              xl: "1.5rem",
              "2xl": "2rem",
              full: "9999px",
            },
            boxShadow: {
              soft: "0 4px 12px 0 rgba(0, 0, 0, 0.05)",
              "soft-dark": "0 4px 12px 0 rgba(0, 0, 0, 0.15)",
              fab: "0 8px 20px 0 rgba(16, 185, 129, 0.3)",
            },
          },
        },
      };
    </script>
    <style>
      body {
        min-height: max(884px, 100dvh);
      }
    </style>
  </head>
  <body class="bg-black font-display">
    <div
      class="relative mx-auto flex h-auto min-h-screen w-full max-w-md flex-col overflow-x-hidden group/design-root bg-background-light dark:bg-background-dark"
    >
      <!-- Sticky Header -->
      <header
        class="sticky top-0 z-40 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm"
      >
        <div class="flex flex-col gap-3 p-4 pb-3">
          <div class="flex items-center justify-between">
            <div class="flex-1">
              <p
                class="text-text-light dark:text-text-dark tracking-light text-[28px] font-bold leading-tight"
              >
                Communauté
              </p>
              <p
                class="text-text-secondary-light dark:text-text-secondary-dark text-sm font-medium"
              >
                Découvrez les recettes partagées par la communauté
              </p>
            </div>
            <a
              href="16-favorites.html"
              class="flex items-center justify-center size-12 rounded-xl bg-primary/10 hover:bg-primary/20 text-primary transition-colors shrink-0"
              title="Mes recettes favorites"
            >
              <span class="material-symbols-outlined text-2xl" style="font-variation-settings: 'FILL' 1">favorite</span>
            </a>
          </div>
        </div>
      </header>

      <!-- Main Content: Recipe Feed -->
      <main class="flex-1 px-4 py-4 space-y-4 pb-28">
        <!-- Recipe Card 1 -->
        <div
          class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-soft dark:shadow-none overflow-hidden"
        >
          <!-- Profile Header -->
          <div class="flex items-center gap-3 p-4 pb-3">
            <div class="flex-1">
              <p class="text-text-light dark:text-text-dark font-semibold text-base">
                Jean Dupont
              </p>
              <p class="text-text-secondary-light dark:text-text-secondary-dark text-xs mt-0.5">
                Il y a 2 heures
              </p>
            </div>
          </div>

          <!-- Recipe Image (optional) -->
          <div class="w-full h-48 bg-slate-200 dark:bg-slate-700 flex items-center justify-center">
            <span class="material-symbols-outlined text-6xl text-text-secondary-light dark:text-text-secondary-dark">
              restaurant_menu
            </span>
          </div>

          <!-- Recipe Content -->
          <div class="p-4 space-y-4">
            <!-- Recipe Title and Favorite Button -->
            <div class="flex items-start justify-between gap-3">
              <div class="flex-1">
                <h3 class="text-xl font-bold text-text-light dark:text-text-dark">
                  Creamy Chicken & Broccoli Rice
                </h3>
                <p class="text-text-secondary-light dark:text-text-secondary-dark text-sm mt-1">
                  Une recette simple et délicieuse avec vos ingrédients
                </p>
              </div>
              <button
                class="favorite-btn flex items-center justify-center size-10 rounded-full bg-slate-100 dark:bg-slate-800 text-text-secondary-light dark:text-text-secondary-dark hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors shrink-0"
                onclick="toggleFavorite(this)"
                title="Ajouter aux favoris"
              >
                <span class="material-symbols-outlined">favorite</span>
              </button>
            </div>

            <!-- Ingredients Preview -->
            <div>
              <h4 class="text-sm font-semibold text-text-light dark:text-text-dark mb-2">
                Ingrédients principaux
              </h4>
              <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Poulet
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Riz
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Brocoli
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  +3 autres
                </span>
              </div>
            </div>

            <!-- View Recipe Button -->
            <button
              onclick="viewRecipe(1)"
              class="w-full py-3 px-4 rounded-xl text-center font-semibold bg-primary/10 hover:bg-primary/20 text-primary transition-colors"
            >
              Voir la recette complète
            </button>
          </div>
        </div>

        <!-- Recipe Card 2 (without image) -->
        <div
          class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-soft dark:shadow-none overflow-hidden"
        >
          <!-- Profile Header -->
          <div class="flex items-center gap-3 p-4 pb-3">
            <div class="flex-1">
              <p class="text-text-light dark:text-text-dark font-semibold text-base">
                Marie Martin
              </p>
              <p class="text-text-secondary-light dark:text-text-secondary-dark text-xs mt-0.5">
                Il y a 5 heures
              </p>
            </div>
          </div>

          <!-- Recipe Content (no image) -->
          <div class="p-4 space-y-4">
            <!-- Recipe Title and Favorite Button -->
            <div class="flex items-start justify-between gap-3">
              <div class="flex-1">
                <h3 class="text-xl font-bold text-text-light dark:text-text-dark">
                  Salade de Quinoa aux Légumes
                </h3>
                <p class="text-text-secondary-light dark:text-text-secondary-dark text-sm mt-1">
                  Une salade fraîche et équilibrée, parfaite pour l'été
                </p>
              </div>
              <button
                class="favorite-btn favorited flex items-center justify-center size-10 rounded-full bg-slate-100 dark:bg-slate-800 text-destructive hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors shrink-0"
                onclick="toggleFavorite(this)"
                title="Retirer des favoris"
              >
                <span class="material-symbols-outlined">favorite</span>
              </button>
            </div>

            <!-- Ingredients Preview -->
            <div>
              <h4 class="text-sm font-semibold text-text-light dark:text-text-dark mb-2">
                Ingrédients principaux
              </h4>
              <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Quinoa
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Tomates
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Concombre
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  +5 autres
                </span>
              </div>
            </div>

            <!-- View Recipe Button -->
            <button
              onclick="viewRecipe(2)"
              class="w-full py-3 px-4 rounded-xl text-center font-semibold bg-primary/10 hover:bg-primary/20 text-primary transition-colors"
            >
              Voir la recette complète
            </button>
          </div>
        </div>

        <!-- Recipe Card 3 -->
        <div
          class="bg-surface-light dark:bg-surface-dark rounded-xl shadow-soft dark:shadow-none overflow-hidden"
        >
          <!-- Profile Header -->
          <div class="flex items-center gap-3 p-4 pb-3">
            <div class="flex-1">
              <p class="text-text-light dark:text-text-dark font-semibold text-base">
                Pierre Bernard
              </p>
              <p class="text-text-secondary-light dark:text-text-secondary-dark text-xs mt-0.5">
                Il y a 1 jour
              </p>
            </div>
          </div>

          <!-- Recipe Image (optional) -->
          <div class="w-full h-48 bg-slate-200 dark:bg-slate-700 flex items-center justify-center">
            <span class="material-symbols-outlined text-6xl text-text-secondary-light dark:text-text-secondary-dark">
              restaurant_menu
            </span>
          </div>

          <!-- Recipe Content -->
          <div class="p-4 space-y-4">
            <!-- Recipe Title and Favorite Button -->
            <div class="flex items-start justify-between gap-3">
              <div class="flex-1">
                <h3 class="text-xl font-bold text-text-light dark:text-text-dark">
                  Lasagnes Maison
                </h3>
                <p class="text-text-secondary-light dark:text-text-secondary-dark text-sm mt-1">
                  Une recette traditionnelle de lasagnes au fromage et à la viande
                </p>
              </div>
              <button
                class="favorite-btn flex items-center justify-center size-10 rounded-full bg-slate-100 dark:bg-slate-800 text-text-secondary-light dark:text-text-secondary-dark hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors shrink-0"
                onclick="toggleFavorite(this)"
                title="Ajouter aux favoris"
              >
                <span class="material-symbols-outlined">favorite</span>
              </button>
            </div>

            <!-- Ingredients Preview -->
            <div>
              <h4 class="text-sm font-semibold text-text-light dark:text-text-dark mb-2">
                Ingrédients principaux
              </h4>
              <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Pâtes
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Viande hachée
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  Fromage
                </span>
                <span class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium">
                  +7 autres
                </span>
              </div>
            </div>

            <!-- View Recipe Button -->
            <button
              onclick="viewRecipe(3)"
              class="w-full py-3 px-4 rounded-xl text-center font-semibold bg-primary/10 hover:bg-primary/20 text-primary transition-colors"
            >
              Voir la recette complète
            </button>
          </div>
        </div>
      </main>

      <!-- Bottom Sheet for Recipe Details -->
      <div
        id="recipe-sheet"
        class="fixed inset-0 z-50 flex items-end pointer-events-none"
      >
        <!-- Backdrop -->
        <div
          class="absolute inset-0 bg-black/40 bottom-sheet-backdrop opacity-0"
          onclick="closeRecipeSheet()"
        ></div>
        <!-- Sheet Content -->
        <div
          class="relative w-full max-w-md mx-auto bg-background-light dark:bg-background-dark rounded-t-2xl transform translate-y-full bottom-sheet pointer-events-auto max-h-[90vh] overflow-y-auto"
        >
          <div
            class="mx-auto w-12 h-1.5 flex-shrink-0 rounded-full bg-slate-300 dark:bg-slate-600 mt-3 mb-4"
          ></div>
          
          <!-- Recipe Details Content -->
          <div id="recipe-details" class="px-4 pb-6 space-y-6">
            <!-- Profile Section -->
            <div id="recipe-profile" class="flex items-center gap-3">
              <div class="flex-1">
                <p class="text-text-light dark:text-text-dark font-semibold text-base">
                  Jean Dupont
                </p>
              </div>
            </div>

            <!-- Recipe Title and Description -->
            <div id="recipe-header" class="space-y-2">
              <h2 id="recipe-name" class="text-2xl font-bold text-text-light dark:text-text-dark">
                Creamy Chicken & Broccoli Rice
              </h2>
              <p id="recipe-description" class="text-text-secondary-light dark:text-text-secondary-dark text-sm">
                Une recette simple et délicieuse avec vos ingrédients.
              </p>
            </div>

            <!-- Recipe Info -->
            <div id="recipe-info" class="grid grid-cols-2 gap-3">
              <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-3 text-center shadow-soft dark:shadow-none">
                <span class="material-symbols-outlined text-primary text-2xl block mb-1">
                  schedule
                </span>
                <p class="text-text-secondary-light dark:text-text-secondary-dark text-xs">Temps</p>
                <p id="recipe-time" class="text-text-light dark:text-text-dark font-semibold text-sm">30 min</p>
              </div>
              <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-3 text-center shadow-soft dark:shadow-none">
                <span class="material-symbols-outlined text-primary text-2xl block mb-1">
                  favorite
                </span>
                <p class="text-text-secondary-light dark:text-text-secondary-dark text-xs">Favoris</p>
                <p class="text-text-light dark:text-text-dark font-semibold text-sm">12</p>
              </div>
            </div>

            <!-- Ingredients Section -->
            <div id="recipe-ingredients-section" class="space-y-3">
              <h3 class="text-lg font-bold text-text-light dark:text-text-dark">
                Ingrédients
              </h3>
              <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-4 shadow-soft dark:shadow-none">
                <ul id="recipe-ingredients" class="space-y-2">
                  <!-- Ingredients will be loaded here -->
                </ul>
              </div>
            </div>

            <!-- Steps Section -->
            <div id="recipe-steps-section" class="space-y-3">
              <h3 class="text-lg font-bold text-text-light dark:text-text-dark">
                Instructions
              </h3>
              <div class="bg-surface-light dark:bg-surface-dark rounded-xl p-4 shadow-soft dark:shadow-none space-y-4">
                <ol id="recipe-steps" class="space-y-4">
                  <!-- Steps will be loaded here -->
                </ol>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="space-y-3 pt-2">
              <button
                id="add-favorite-btn"
                onclick="addToFavorites()"
                class="w-full py-4 px-4 rounded-xl text-center font-bold bg-primary text-white text-lg shadow-fab flex items-center justify-center gap-2"
              >
                <span class="material-symbols-outlined">favorite</span>
                Ajouter aux favoris
              </button>
              <button
                onclick="shareRecipe()"
                class="w-full py-3 px-4 rounded-xl text-center font-semibold bg-surface-light dark:bg-surface-dark text-text-light dark:text-text-dark shadow-soft dark:shadow-none"
              >
                <span class="material-symbols-outlined align-middle mr-2">share</span>
                Partager cette recette
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Navigation -->
      <nav
        class="fixed bottom-0 left-0 right-0 z-50 mx-auto max-w-md border-t border-slate-200/50 dark:border-slate-700/50 bg-surface-light/80 dark:bg-surface-dark/80 backdrop-blur-sm"
      >
        <div class="flex h-20 items-center justify-around px-4">
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="3-inventory.html"
          >
            <span class="material-symbols-outlined">inventory_2</span>
            <span class="text-xs font-medium">Inventaire</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="5-recipe_prompt.html"
          >
            <span class="material-symbols-outlined">restaurant_menu</span>
            <span class="text-xs font-medium">Recette</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-primary"
            href="14-communaute.html"
          >
            <span
              class="material-symbols-outlined"
              style="font-variation-settings: 'FILL' 1"
              >groups</span
            >
            <span class="text-xs font-medium">Communauté</span>
          </a>
          <a
            class="flex flex-col items-center justify-center gap-1 text-text-secondary-light dark:text-text-secondary-dark"
            href="13-monprofil.html"
          >
            <span
              class="material-symbols-outlined"
              style="font-variation-settings: 'FILL' 1"
              >account_circle</span
            >
            <span class="text-xs font-medium">Profil</span>
          </a>
        </div>
      </nav>

    </div>
    <script>
      function toggleFavorite(button) {
        button.classList.toggle("favorited");
        const isFavorited = button.classList.contains("favorited");
        button.title = isFavorited
          ? "Retirer des favoris"
          : "Ajouter aux favoris";

        // Here you would make an API call to save/unsave the recipe
        console.log(
          isFavorited ? "Recipe favorited" : "Recipe unfavorited"
        );

        // Show feedback
        if (isFavorited) {
          // You could show a toast notification here
          console.log("Recette ajoutée aux favoris!");
        } else {
          console.log("Recette retirée des favoris!");
        }
      }


      // Recipe data (replace with actual API call)
      const recipesData = {
        1: {
          id: 1,
          name: "Creamy Chicken & Broccoli Rice",
          description: "Une recette simple et délicieuse avec vos ingrédients. Parfaite pour un repas complet et équilibré.",
          matching: 95,
          preparation_time: 30,
          ingredients: [
            "2 poitrines de poulet désossées et sans peau, coupées en dés",
            "1 tasse de riz blanc",
            "1 tête de brocoli, coupée en fleurettes",
            "1 tasse de crème épaisse",
            "1/2 tasse de parmesan râpé",
            "2 gousses d'ail, hachées",
            "Sel et poivre au goût"
          ],
          steps: [
            "Cuire le riz selon les instructions sur l'emballage. Pendant qu'il cuit, assaisonner le poulet coupé en dés avec du sel et du poivre.",
            "Dans une grande poêle, cuire le poulet à feu moyen-élevé jusqu'à ce qu'il soit doré et cuit. Retirer et réserver.",
            "Dans la même poêle, faire revenir l'ail haché pendant environ 30 secondes. Ajouter les fleurettes de brocoli et cuire jusqu'à ce qu'elles soient tendres mais encore croquantes.",
            "Réduire le feu à doux, verser la crème épaisse et porter à ébullition. Incorporer le parmesan jusqu'à ce qu'il soit fondu et que la sauce ait légèrement épaissi.",
            "Remettre le poulet dans la poêle. Ajouter le riz cuit et mélanger le tout jusqu'à ce que tout soit bien combiné et chaud. Assaisonner avec du sel et du poivre supplémentaires si nécessaire. Servir immédiatement."
          ],
          image: null,
          author: {
            name: "Jean Dupont",
            initials: "JD",
            timeAgo: "Il y a 2 heures"
          },
          createdAt: "Il y a 2 heures"
        },
        2: {
          id: 2,
          name: "Salade de Quinoa aux Légumes",
          description: "Une salade fraîche et équilibrée, parfaite pour l'été",
          matching: 88,
          preparation_time: 20,
          ingredients: [
            "1 tasse de quinoa",
            "2 tomates, coupées en dés",
            "1 concombre, coupé en dés",
            "1 poivron rouge, coupé en dés",
            "1/4 tasse d'huile d'olive",
            "2 cuillères à soupe de vinaigre de cidre",
            "Sel et poivre au goût"
          ],
          steps: [
            "Cuire le quinoa selon les instructions sur l'emballage. Laisser refroidir.",
            "Couper tous les légumes en dés de taille uniforme.",
            "Mélanger l'huile d'olive et le vinaigre dans un petit bol pour faire la vinaigrette.",
            "Dans un grand saladier, mélanger le quinoa refroidi avec tous les légumes.",
            "Verser la vinaigrette sur la salade et mélanger délicatement. Assaisonner avec du sel et du poivre. Servir frais."
          ],
          image: null,
          author: {
            name: "Marie Martin",
            initials: "MM",
            timeAgo: "Il y a 5 heures"
          },
          createdAt: "Il y a 5 heures"
        },
        3: {
          id: 3,
          name: "Lasagnes Maison",
          description: "Une recette traditionnelle de lasagnes au fromage et à la viande",
          matching: 92,
          preparation_time: 60,
          ingredients: [
            "12 feuilles de pâtes à lasagnes",
            "500g de viande hachée",
            "400g de sauce tomate",
            "300g de fromage râpé",
            "200g de béchamel",
            "1 oignon, haché",
            "2 gousses d'ail, hachées",
            "Sel, poivre, origan"
          ],
          steps: [
            "Préchauffer le four à 180°C. Faire revenir l'oignon et l'ail dans une poêle.",
            "Ajouter la viande hachée et cuire jusqu'à ce qu'elle soit bien dorée. Ajouter la sauce tomate et les épices.",
            "Dans un plat à gratin, alterner les couches : pâtes, viande, fromage, béchamel. Répéter jusqu'à épuisement des ingrédients.",
            "Terminer par une couche de fromage. Enfourner pendant 45 minutes.",
            "Laisser reposer 10 minutes avant de servir."
          ],
          image: null,
          author: {
            name: "Pierre Bernard",
            initials: "PB",
            timeAgo: "Il y a 1 jour"
          },
          createdAt: "Il y a 1 jour"
        }
      };

      function viewRecipe(recipeId) {
        const recipe = recipesData[recipeId];
        if (!recipe) {
          console.error("Recipe not found:", recipeId);
          return;
        }

        // Update profile section
        const profileSection = document.getElementById("recipe-profile");
        const nameElement = profileSection.querySelector(".font-semibold");
        nameElement.textContent = recipe.author.name;
        
        // Add or update time ago
        let timeAgoElement = profileSection.querySelector(".text-xs");
        if (!timeAgoElement || !timeAgoElement.textContent.includes("Il y a")) {
          timeAgoElement = document.createElement("p");
          timeAgoElement.className = "text-text-secondary-light dark:text-text-secondary-dark text-xs mt-0.5";
          nameElement.parentElement.appendChild(timeAgoElement);
        }
        timeAgoElement.textContent = recipe.author.timeAgo;

        // Update header
        document.getElementById("recipe-name").textContent = recipe.name;
        document.getElementById("recipe-description").textContent = recipe.description;

        // Update info cards
        document.getElementById("recipe-time").textContent = `${recipe.preparation_time} min`;

        // Update ingredients
        const ingredientsList = document.getElementById("recipe-ingredients");
        ingredientsList.innerHTML = recipe.ingredients.map(ingredient => `
          <li class="flex items-start">
            <span class="material-symbols-outlined text-primary text-base mr-3 mt-0.5 shrink-0">check_circle</span>
            <span class="text-text-light dark:text-text-dark text-sm">${ingredient}</span>
          </li>
        `).join("");

        // Update steps
        const stepsList = document.getElementById("recipe-steps");
        stepsList.innerHTML = recipe.steps.map((step, index) => `
          <li class="flex items-start">
            <div class="flex-shrink-0 flex items-center justify-center size-8 bg-primary text-white font-bold text-sm rounded-full mr-3 mt-0.5">
              ${index + 1}
            </div>
            <p class="text-text-light dark:text-text-dark text-sm leading-relaxed">${step}</p>
          </li>
        `).join("");

        // Store current recipe ID for actions
        document.getElementById("recipe-sheet").dataset.recipeId = recipeId;

        // Open the sheet
        document.getElementById("recipe-sheet").classList.add("show-sheet");
      }

      function closeRecipeSheet() {
        document.getElementById("recipe-sheet").classList.remove("show-sheet");
      }

      function addToFavorites() {
        const recipeId = document.getElementById("recipe-sheet").dataset.recipeId;
        const btn = document.getElementById("add-favorite-btn");
        const isFavorited = btn.classList.contains("favorited");
        
        // Toggle favorite state
        btn.classList.toggle("favorited");
        
        if (!isFavorited) {
          btn.innerHTML = '<span class="material-symbols-outlined">favorite</span> Retiré des favoris';
          btn.classList.add("bg-destructive/10", "text-destructive");
          btn.classList.remove("bg-primary", "text-white");
        } else {
          btn.innerHTML = '<span class="material-symbols-outlined">favorite</span> Ajouter aux favoris';
          btn.classList.remove("bg-destructive/10", "text-destructive");
          btn.classList.add("bg-primary", "text-white");
        }
        
        // Here you would make an API call to add/remove from favorites
        console.log(isFavorited ? "Recipe removed from favorites" : "Recipe added to favorites", recipeId);
        
        // Show feedback
        if (!isFavorited) {
          alert("Recette ajoutée aux favoris!");
        } else {
          alert("Recette retirée des favoris!");
        }
      }

      function shareRecipe() {
        const recipeId = document.getElementById("recipe-sheet").dataset.recipeId;
        const recipe = recipesData[recipeId];
        
        if (navigator.share) {
          navigator.share({
            title: recipe.name,
            text: recipe.description,
            url: window.location.href,
          }).catch((error) => {
            console.log("Error sharing:", error);
          });
        } else {
          navigator.clipboard.writeText(window.location.href).then(() => {
            alert("Lien de la recette copié dans le presse-papiers !");
          });
        }
      }

      // Load recipes on page load (replace with actual API call)
      document.addEventListener("DOMContentLoaded", () => {
        // fetch('/api/community/recipes')
        //   .then(res => res.json())
        //   .then(data => {
        //     // Render recipes dynamically
        //   });
        console.log("Communauté page loaded");
      });
    </script>
  </body>
</html>

